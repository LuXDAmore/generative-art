(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{484:function(e,n){},485:function(e,n){},511:function(e,n){},554:function(e,n,t){"use strict";t.r(n);t(20),t(8),t(22);var r=t(2),o=t(550),c=(t(549),t(548),t(211)),l={name:"facemesh-with-machine-learning",data:()=>({sketchManager:null,facemesh:null}),mounted(){var e=this;return Object(r.a)((function*(){try{e.sketchManager=yield e.$sketch({animate:!0,duration:6.279582609797744,context:"webgl",attributes:{antialias:!0},canvas:e.$refs.canvas},e.sketch)}catch(e){console.error(e)}}))()},beforeDestroy(){this.sketchManager&&this.sketchManager.unload()},methods:{sketch(e){var n=this;return Object(r.a)((function*(){var{context:l,width:d,height:v}=e,h=new c.I({context:l,antialias:!0,alpha:!0});h.setClearColor(new c.f("#333"),1),h.physicallyCorrectLights=!0,h.outputEncoding=c.J;var f=new c.s(92,d/v,.01);f.position.set(0,0,250),f.lookAt(new c.F(1,1,1));var{OrbitControls:m}=yield t.e(1).then(t.bind(null,552)).then(e=>e.default||e),y=new m(f,l.canvas),w=new c.y,x=new c.t(100,100),_=new c.p({color:new c.f("#123"),side:c.i}),P=new c.e,C=new c.z({vertexShader:"#define GLSLIFY 1\n// VSCode vertex\n#pragma vscode_glsllint_stage : vert\n\n// Varying\nvarying vec3 vPos;\n\n// Main\nvoid main () {\n\n    vPos = position.xyz;\n\n   vec4 mvPosition = modelViewMatrix * vec4( position.xyz, 1.0 );\n\n    gl_PointSize = 600. * ( 1. / - mvPosition.z );\n\n    gl_Position = projectionMatrix * mvPosition;\n\n}\n",fragmentShader:"#define GLSLIFY 1\n// VSCode Frag\n#pragma vscode_glsllint_stage : frag\n\n// Const\nconst float PI = 3.1415926535897932384626433832795;\n\n// Uniforms\nuniform mediump float uPlayhead;\nuniform sampler2D pointTexture;\n\n// Varying\nvarying vec3 vPos;\n\n// Main\nvoid main () {\n\n    gl_FragColor = vec4( gl_PointCoord, 1., 1. ) * vec4( vPos, 1. );\n\n}\n",extensions:{derivatives:"#extension GL_OES_standard_derivatives : enable"},depthTest:!1,depthWrite:!1,transparent:!0,side:c.i,uniforms:{uPlayhead:{type:"f",value:0}}}),$=new c.u(P,C),k=new c.o(x,_),M=new c.l(new Array(1404).fill(0),3).setUsage(c.j);if(x.name="face",M.name="position",P.setAttribute("position",M),w.add($),w.add(k),n.$refs.video){var j=function(){var e=Object(r.a)((function*(){if(n.facemesh){var e=yield n.facemesh.estimateFaces(n.$refs.video);e.length&&e.forEach(e=>{e.mesh&&(e.mesh.forEach((e,n)=>{var[t,r,o]=e;return M.setXYZ(n,t,r,o)}),P.attributes.position.needsUpdate=!0,console.info("Face updated",{pointsGeometry:P}))})}}));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(r.a)((function*(){n.facemesh=yield o.a({maxFaces:1}),yield j()}));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(r.a)((function*(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v;try{if(!n.$refs.video)return;var r=d/3,o=v/3;n.$refs.video.width=r,n.$refs.video.height=o,n.$refs.video.srcObject=yield navigator.mediaDevices.getUserMedia({audio:!1,video:{width:e,height:t,facingMode:"user"}}),yield z(),yield n.$refs.video.play()}catch(e){console.error(e)}}));return function(){return e.apply(this,arguments)}}();return n.$refs.video.addEventListener("click",j,!1),n.$refs.video.addEventListener("playing",j,!1),{render(e){var{playhead:n}=e;C.uniforms.uPlayhead.value=n,y.update(),h.render(w,f)},resize(e){var{pixelRatio:n,viewportWidth:t,viewportHeight:r}=e;h.setSize(t,r,!1),h.setPixelRatio(n),f.aspect=r/r,f.updateProjectionMatrix(),O()},unload(){y.dispose(),h.dispose()}}}}))()}}},d=t(33),component=Object(d.a)(l,(function(){var e=this.$createElement,n=this._self._c||e;return n("main",{staticClass:"container canvas-container"},[n("canvas",{ref:"canvas"}),n("video",{ref:"video",staticClass:"absolute z-index--1 pin-r pin-b cursor--pointer",attrs:{preload:"auto",playsinline:"",autoplay:"",muted:""},domProps:{muted:!0}}),this._m(0)])}),[function(){var e=this.$createElement,n=this._self._c||e;return n("h6",{staticClass:"w-full absolute z-index--2 text--center no-pointer-event pin-r pin-b"},[this._v(" Click on the video to see your face"),n("br"),n("small",[this._v("(allow access to camera and microphone)")])])}],!1,null,null,null);n.default=component.exports}}]);