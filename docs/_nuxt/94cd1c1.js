(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{524:function(e,n){},525:function(e,n){},551:function(e,n){},613:function(e,n,t){"use strict";t.r(n);t(293),t(32),t(30),t(12),t(33);var r=t(49),o=(t(21),t(3)),c=t(610),l=(t(609),t(608),t(248)),d={name:"facemesh-with-machine-learning",data:function(){return{sketchManager:null,facemesh:null}},mounted:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$sketch({animate:!0,duration:6.279582609797744,context:"webgl",attributes:{antialias:!0},canvas:e.$refs.canvas},e.sketch);case 3:e.sketchManager=n.sent,n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),console.error(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))()},beforeDestroy:function(){this.sketchManager&&this.sketchManager.unload()},methods:{sketch:function(e){var n=this;return Object(o.a)(regeneratorRuntime.mark((function d(){var f,v,h,m,w,x,y,k,_,P,C,$,R,j,M,O,E,S,z;return regeneratorRuntime.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return f=e.context,v=e.width,h=e.height,(m=new l.H({context:f,antialias:!0,alpha:!0})).setClearColor(new l.f("#333"),1),m.physicallyCorrectLights=!0,m.outputEncoding=l.I,(w=new l.r(92,v/h,.01)).position.set(0,0,250),w.lookAt(new l.E(1,1,1)),d.next=10,t.e(1).then(t.bind(null,612)).then((function(e){return e.default||e}));case 10:if(x=d.sent,y=x.OrbitControls,k=new y(w,f.canvas),_=new l.x,P=new l.s(100,100),C=new l.p({color:new l.f("#123"),side:l.i}),$=new l.e,R=new l.y({vertexShader:"#define GLSLIFY 1\n// VSCode vertex\n#pragma vscode_glsllint_stage : vert\n\n// Varying\nvarying vec3 vPos;\n\n// Main\nvoid main () {\n\n    vPos = position.xyz;\n\n   vec4 mvPosition = modelViewMatrix * vec4( position.xyz, 1.0 );\n\n    gl_PointSize = 600. * ( 1. / - mvPosition.z );\n\n    gl_Position = projectionMatrix * mvPosition;\n\n}\n",fragmentShader:"#define GLSLIFY 1\n// VSCode Frag\n#pragma vscode_glsllint_stage : frag\n\n// Const\nconst float PI = 3.1415926535897932384626433832795;\n\n// Uniforms\nuniform mediump float uPlayhead;\nuniform sampler2D pointTexture;\n\n// Varying\nvarying vec3 vPos;\n\n// Main\nvoid main () {\n\n    gl_FragColor = vec4( gl_PointCoord, 1., 1. ) * vec4( vPos, 1. );\n\n}\n",extensions:{derivatives:"#extension GL_OES_standard_derivatives : enable"},depthTest:!1,depthWrite:!1,transparent:!0,side:l.i,uniforms:{uPlayhead:{type:"f",value:0}}}),j=new l.t($,R),new l.o(P,C),468,3,M=3,O=new l.l(new Array(1404).fill(0),3).setUsage(l.j),P.name="face",O.name="position",$.setAttribute("position",O),_.add(j),n.$refs.video){d.next=30;break}return d.abrupt("return");case 30:return E=function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.facemesh){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.facemesh.estimateFaces(n.$refs.video);case 4:if((t=e.sent).length){e.next=7;break}return e.abrupt("return");case 7:t.forEach((function(e){e.mesh&&(e.mesh.forEach((function(e,n){var t=Object(r.a)(e,3),o=t[0],c=t[1],l=t[2];return O.setXYZ(n,o,c,l)})),$.attributes.position.needsUpdate=!0,console.info("Face updated",{pointsGeometry:$}))}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a({maxFaces:1});case 2:return n.facemesh=e.sent,e.next=5,E();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(){var t,r,o,c,l=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]?l[0]:v,r=l.length>1&&void 0!==l[1]?l[1]:h,e.prev=2,n.$refs.video){e.next=5;break}return e.abrupt("return");case 5:return o=v/M,c=h/M,n.$refs.video.width=o,n.$refs.video.height=c,e.next=10,navigator.mediaDevices.getUserMedia({audio:!1,video:{width:t,height:r,facingMode:"user"}});case 10:return n.$refs.video.srcObject=e.sent,e.next=13,S();case 13:return e.next=15,n.$refs.video.play();case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),console.error(e.t0);case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),n.$refs.video.addEventListener("click",E,!1),n.$refs.video.addEventListener("playing",E,!1),d.abrupt("return",{render:function(e){var n=e.playhead;R.uniforms.uPlayhead.value=n,k.update(),m.render(_,w)},resize:function(e){var n=e.pixelRatio,t=e.viewportWidth,r=e.viewportHeight;m.setSize(t,r,!1),m.setPixelRatio(n),w.aspect=r/r,w.updateProjectionMatrix(),z()},unload:function(){k.dispose(),m.dispose()}});case 34:case"end":return d.stop()}}),d)})))()}}},f=t(51),component=Object(f.a)(d,(function(){var e=this.$createElement,n=this._self._c||e;return n("main",{staticClass:"container canvas-container"},[n("canvas",{ref:"canvas"}),n("video",{ref:"video",staticClass:"absolute z-index--1 pin-r pin-b cursor--pointer",attrs:{preload:"auto",playsinline:"",autoplay:"",muted:""},domProps:{muted:!0}}),this._m(0)])}),[function(){var e=this.$createElement,n=this._self._c||e;return n("h6",{staticClass:"w-full absolute z-index--2 text--center no-pointer-event pin-r pin-b"},[this._v(" Click on the video to see your face"),n("br"),n("small",[this._v("(allow access to camera and microphone)")])])}],!1,null,null,null);n.default=component.exports}}]);